<!DOCTYPE HTML>
<html xmlns:th="https://www.thymeleaf.org">
<head> 
    <title>Getting Started: Handling Form Submission</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <style>
       body {
        background-image: linear-gradient(to right, #7B1FA2, #E91E63)
    }
 
    .section {
        position: relative;
        height: 100vh;
    }
 
    .section .section-center {
        position: absolute;
        top: 50%;
        left: 0;
        right: 0;
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
    }
 
    #booking {
        font-family: 'Raleway', sans-serif;
    }
 
    .booking-form {
        position: relative;
        max-width: 642px;
        width: 100%;
        margin: auto;
        padding: 40px;
        overflow: hidden;
        background-size: cover;
        border-radius: 5px;
        z-index: 20;
    }
 
    .booking-form::before {
        content: '';
        position: absolute;
        left: 0;
        right: 0;
        bottom: 0;
        top: 0;
        z-index: -1;
    }
 
    .booking-form .form-header {
        text-align: center;
        position: relative;
        margin-bottom: 30px;
    }
 
    .booking-form .form-header h1 {
        font-weight: 700;
        text-transform: capitalize;
        font-size: 42px;
        margin: 0px;
        color: #fff;
    }
 
    .booking-form .form-group {
        position: relative;
        margin-bottom: 30px;
    }
 
    .booking-form .form-control {
        background-color: rgba(255, 255, 255, 0.2);
        height: 60px;
        padding: 0px 25px;
        border: none;
        border-radius: 40px;
        color: #fff;
        -webkit-box-shadow: 0px 0px 0px 2px transparent;
        box-shadow: 0px 0px 0px 2px transparent;
        -webkit-transition: 0.2s;
        transition: 0.2s;
    }
 
    .booking-form .form-control::-webkit-input-placeholder {
        color: rgba(255, 255, 255, 0.5);
    }
 
    .booking-form .form-control:-ms-input-placeholder {
        color: rgba(255, 255, 255, 0.5);
    }
 
    .booking-form .form-control::placeholder {
        color: rgba(255, 255, 255, 0.5);
    }
 
    .booking-form .form-control:focus {
        -webkit-box-shadow: 0px 0px 0px 2px #ff8846;
        box-shadow: 0px 0px 0px 2px #ff8846;
    }
 
    .booking-form input[type="date"].form-control {
        padding-top: 16px;
    }
 
    .booking-form input[type="date"].form-control:invalid {
        color: rgba(255, 255, 255, 0.5);
    }
 
    .booking-form input[type="date"].form-control+.form-label {
        opacity: 1;
        top: 10px;
    }
 
    .booking-form select.form-control {
        -webkit-appearance: none;
        -moz-appearance: none;
        appearance: none;
    }
 
    .booking-form select.form-control:invalid {
        color: rgba(255, 255, 255, 0.5);
    }
 
    .booking-form select.form-control+.select-arrow {
        position: absolute;
        right: 15px;
        top: 50%;
        -webkit-transform: translateY(-50%);
        transform: translateY(-50%);
        width: 32px;
        line-height: 32px;
        height: 32px;
        text-align: center;
        pointer-events: none;
        color: rgba(255, 255, 255, 0.5);
        font-size: 14px;
    }
 
    .booking-form select.form-control+.select-arrow:after {
        content: '\279C';
        display: block;
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
    }
 
    .booking-form select.form-control option {
        color: #000;
    }
 
    .booking-form .form-label {
        position: absolute;
        top: -10px;
        left: 25px;
        opacity: 0;
        color: #ff8846;
        font-size: 11px;
        font-weight: 700;
        text-transform: uppercase;
        letter-spacing: 1.3px;
        height: 15px;
        line-height: 15px;
        -webkit-transition: 0.2s all;
        transition: 0.2s all;
    }
 
    .booking-form .form-group.input-not-empty .form-control {
        padding-top: 16px;
    }
 
    .booking-form .form-group.input-not-empty .form-label {
        opacity: 1;
        top: 10px;
    }
 
    .booking-form .submit-btn {
        color: #fff;
        background-color: #e35e0a;
        font-weight: 700;
        height: 60px;
        padding: 10px 30px;
        width: 100%;
        border-radius: 40px;
        border: none;
        text-transform: uppercase;
        font-size: 16px;
        letter-spacing: 1.3px;
        -webkit-transition: 0.2s all;
        transition: 0.2s all;
    }
 
    .booking-form .submit-btn:hover,
    .booking-form .submit-btn:focus {
        opacity: 0.9;
    }
      body{
        background-image: linear-gradient(to right, #7B1FA2, #E91E63);
      }
  
      h1 {
        font-weight: 700;
        text-transform: capitalize;
        font-size: 42px;
        margin: 0px;
        color: #fff;
        text-align: center;
        position: relative;
        margin-bottom: 30px;
      }
      
    </style>
</head>
 
<script src="view.js"></script>
 
 
<body>
    <!-- <input type="button" value="Generate a table." onclick="generate_table()">
    <INPUT type="button" value="get JAVA array (as a string)" onClick = "getJavaArrayAsAString()"> -->
 
    <div class="container mt-3">
      <h1>Spots Available</h1>
      <table class="table table-dark">
        <thead>
          <th>Sno</th>
          <th>Name</th>
          <th>Location</th>
          <th>Number of Slots for SUV</th>
          <th>Number of Slots for Hatchback</th>
        </thead>
        <tbody id = "tbody1"></tbody>
      </table>
    </div>
    <div class="booking-form">
      <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="form-group">
                <button id="logOut" class="submit-btn">Sign Out</button>
            </div>
        </div>
    </div>                               
</div>
    
</body>
 
 
 
<script type="module">
 
  var stdNo = 0;
  var tbody = document.getElementById('tbody1');
 
  function AddItemsToTable(name, location, suv,hatch){
    let trow = document.createElement("tr");
    let td1 = document.createElement('td');
    let td2 = document.createElement('td');
    let td3 = document.createElement('td');
    let td4 = document.createElement('td');
    let td5 = document.createElement('td');
    
    td1.innerHTML = ++stdNo;
    td2.innerHTML = name;
    td3.innerHTML = location;
    td4.innerHTML = suv;
    td5.innerHTML = hatch;
    
 
    trow.appendChild(td1);
    trow.appendChild(td2);
    trow.appendChild(td3);
    trow.appendChild(td4);
    trow.appendChild(td5);
 
    tbody.appendChild(trow);
 
  }
 
  function AddAllItemsToTable(spots){
    stdNo = 0;
    tbody.innerHTML="";
    spots.forEach(element => {
      AddItemsToTable(element.name, element.location, element.suv,element.hatch);
      // // console.log(element.hour);
      // console.log(element.hour[0].space_1[0]);
      // console.log(element.hour[0].space_1[2].services[1]);
      console.log(element)
    })
  }
 
 
  
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-analytics.js";
  
  const firebaseConfig = {
    apiKey: "AIzaSyBTrQLmG73loEPd8Kg6uV4ZG01RnUdZ7rI",
    authDomain: "trial-6b9c1.firebaseapp.com",
    databaseURL: "https://trial-6b9c1-default-rtdb.firebaseio.com",
    projectId: "trial-6b9c1",
    storageBucket: "trial-6b9c1.appspot.com",
    messagingSenderId: "192488287455",
    appId: "1:192488287455:web:9edc9a178b1ec23f578d6a",
    measurementId: "G-N4RJLP15EL"
  };
 
  
  const app = initializeApp(firebaseConfig);
  const analytics = getAnalytics(app);
 
  import {
    getFirestore, doc, getDoc, getDocs, onSnapshot, collection
  } from "https://www.gstatic.com/firebasejs/9.5.0/firebase-firestore.js";
 
  const db = getFirestore();
 
  async function GetAllDataOnce(){
    const querySnapshot = await getDocs(collection(db, "Spots"));
 
    var spots = [];
 
    querySnapshot.forEach(doc => {
      spots.push(doc.data());
    });
 
    AddAllItemsToTable(spots);
    
    // console.log(slots);
  }
 
  function GetAllDataRealTime(){
    const dbRef = collection(db, "Spots");
 
    onSnapshot(dbRef, (querySnapshot)=> {
      var spots = [];
 
      querySnapshot.forEach(doc => {
        spots.push(doc.data());
      });
      AddAllItemsToTable(spots);
    })
 
  }
 
 
  
 
 
  window.onload = GetAllDataRealTime;
 
 
</script>
 
 
 
 
</html>